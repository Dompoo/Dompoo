# 커스텀 필터 구현하기

- 기본적으로 시큐리티에서의 커스텀 필터는 `OncePerRequestFilter` 또는 `GenericFilterBean`를 구현하여 만든다.
- 둘의 차이점은 `OncePerRequestFilter`가 `GenericFilterBean`을 상속하며, 여러번 요청해도 한번만 반응한다는 점이다.
  - 보통 `OncePerRequestFilter`을 구현하게 된다.
- 무엇을 구현하든 `filterChain.doFilter()`를 통해 필터체인의 다음 필터를 호출해주어야 한다.

```java
@Slf4j
public class DemoGenericFilterBean extends GenericFilterBean {
    
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        log.info("요청에서 DemoGenericFilterBean 호출!!");
        filterChain.doFilter(servletRequest, servletResponse);
        log.info("응답에서 DemoGenericFilterBean 호출!!");
    }
}
```

```java
@Slf4j
public class DemoOncePerRequestFilter extends OncePerRequestFilter {
    
    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        log.info("요청에서 DemoOncePerRequestFilter 호출!!");
        filterChain.doFilter(request, response);
        log.info("응답에서 DemoOncePerRequestFilter 호출!!");
    }
}
```
