# 실무 모니터링 팁

- 모니터링 3단계
  - 대시보드
  - 애플리케이션 추적 : 핀포인트
  - 로그

## 대시보드

- 전체를 한번에 볼 수 있는 넓은 시야의 모니터링 방법
- **마이크로미터**, **프로메테우스**, **그라파나** 등 사용
- 시스템 메트릭, 애플리케이션 메트릭, 서비스 메트릭

## 애플리케이션 추적

- 각각의 HTTP 요청을 추적, 마이크로서비스 환경에서는 분산 추적
- **핀포인트**, 스카우트, 와탭 등 사용
- 시간이 오래 걸린 요청에 대하여 어떤 서비스를 사용했는지, 그 서비스는 어떤 SQL을 탔는지, ...

## 로그

- 가장 세세한 추적, 내 마음대로 커스텀할 수 있다.
- 꼭 같은 HTTP 요청의 로그끼리 묶어서 볼 수 있도록 구성해야 한다. (MDC 적용)
- 일반 로그와 에러 로그를 별도의 파일에 남기자.
- 클라우드에 로그를 저장하는 경우에는 검색이 잘 되도록 구분해서 저장하자.

## 알람

- 모니터링 툴에서 일정 수치가 넘어가면 알람을 줄 필요가 있다.
  - 슬랙, 문자, 이메일 등
- 알람도 꼭 종류를 구분해서 남기자.
  - 경고 : 하루 1번 정도 확인해볼 것
  - 심각 : 당장 확인할 것
  - ...
- 거짓 알람은 바로 처리하자. (거짓양성)
