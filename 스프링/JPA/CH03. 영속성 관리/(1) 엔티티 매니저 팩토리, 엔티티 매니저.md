# 엔티티 매니저 팩토리, 엔티티 매니저

- 엔티티 매니저는 엔티티를 저장/수정/삭제/조회하는 역할을 수행한다.
- 엔티티 매니저는 엔티티 매니저 팩토리를 통해서 만든다.

```java
EntityManagerFactory emf = Persistence.createEntityManagerFactory("jpabook");
EntityManager em = emf.createEntityMAnager();
```

- 엔티티 매니저 팩토리를 생성하는 것은 비용이 많이 들고, 엔티티 매니저 팩토리는 스레드 안전하다.
  - 따라서 엔티티 매니저는 여러 스레드에서 공유하게 된다.
- 엔티티 매니저를 생성하는 것은 비용이 거의 들지 않으며, **스레드 안전하지 않다.**
  - 엔티티 매니저는 절대로 여러 스레드에서 공유하면 안된다.
- 엔티티 매니저는 커넥션을 가질 수 있는데, 보통 트랜잭션을 시작할 때 커넥션을 획득하게 된다.
- 스프링에서 엔티티 매니저 팩토리를 생성할 때 커넥션풀 역시 같이 생성한다.
