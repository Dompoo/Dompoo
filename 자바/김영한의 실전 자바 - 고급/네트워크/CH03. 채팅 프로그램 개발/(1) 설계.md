# 설계

## 요구사항

- 서버에 접속한 사용자는 다른 모든 사용자들과 대화할 수 있다. (단톡방)
- 다음과 같은 명령어가 존재한다.
  - 입장 `/join|{name}` : 채팅 서버에 접속한다.
  - 메시지 `/message|{content}` : 모든 사용자에게 메시지를 전달한다.
  - 이름 변경 `/change|{newName}` : 이름을 변경한다.
  - 전체 사용자 조회 `/users` : 모든 사용자의 이름을 확인한다.
  - 종료 `/exit` : 채팅 서버 접속을 종료한다.
- 어려운 부분은 비동기성이다.
  - 사용자가 콘솔 입력을 받느라 블로킹 되는 순간에도 채팅 메시지는 올 수 있다.
  - 입력과 상관없이 출력되어야 한다.
  - 출력과 상관없이 입력되어야 한다.
- 따라서 스레드를 통한 비동기 프로그래밍을 해야 한다.

## 클라이언트

- `ReadHandler`를 통해 서버 메시지를 지속적으로 받고, 계속 콘솔창에 출력해줘야 한다.
- `WriteHandler`를 통해 사용자 입력을 지속적으로 받고, 계속 서버에 전송해줘야 한다.

## 서버

- 핵심은 한 세션에서의 입력값을 다른 모든 세션에게 전파해야 하는 것이다.
- 세션매니저 같이 모든 세션을 관리하는 객체가 메시지를 전파할 수 있도록 해야 한다.
