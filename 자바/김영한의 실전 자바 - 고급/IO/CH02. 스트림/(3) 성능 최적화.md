# 성능 최적화

## 하나씩 읽고 쓰기

```java
// 쓰기
FileOutputStream fos = new FileOutputStream(FILE_NAME);
		
// 1Byte씩 10 * 1024 * 1024 번 돌리면, 10MB파일이 만들어진다.
for (int i = 0; i < FILE_SIZE; i++) {
	fos.write(1);
}
fos.close();

// 읽기
FileInputStream fis = new FileInputStream(FILE_NAME);

int fileSize = 0;
int data;
while ((data = fis.read()) != -1) {
	fileSize++;
}
fis.close();
```

- 쓰기 작업은 13초, 읽기 작업은 5초 정도 소요된다.
- 한글자씩 `10 * 1024 * 1024`번 반복하니 시간이 오래 걸린다.
- 왜 오래 걸릴까?
  - 하나의 데이터를 IO할때마다 OS의 시스템 콜을 통해 파일을 읽거나 쓰는 명령어를 전달한다.
    - 이 시스템 콜은 무거운 작업이다.
  - HDD / SSD 같은 장치에 쓰는 작업도 물리적인 작업도 오래 걸릴 것이다.
- 물론 실제로는 OS 레벨에서 최적화로 인해 매번 IO하지는 않을 것이다. 하지만 아무튼 많이 IO한다.
